# 🔧 دليل حل مشاكل تشغيل النظام

## 🎯 المشكلة: النظام لا يفتح

### الحلول المرتبة حسب الأولوية:

---

## 🚀 الحل السريع (جرب هذا أولاً)

### 1. اختبار tkinter:
```bash
python test_tkinter.py
```
- إذا فتحت نافذة صغيرة → tkinter يعمل ✅
- إذا لم تفتح → مشكلة في tkinter ❌

### 2. تشغيل واجهة الاختبار:
```bash
python launch_gui.py
```
- ستفتح نافذة اختبار بسيطة
- انقر "تشغيل النظام الكامل"

### 3. إذا لم تعمل الحلول أعلاه:
```bash
python diagnose_system.py
```
- سيعطيك تشخيص مفصل للمشكلة

---

## 🔍 تشخيص المشاكل الشائعة

### المشكلة 1: Python غير مثبت أو إصدار قديم
**الأعراض**: رسالة "python is not recognized" أو خطأ في الإصدار

**الحل**:
1. تحقق من إصدار Python:
   ```bash
   python --version
   ```
2. إذا كان أقل من 3.7، حمل إصدار أحدث من [python.org](https://python.org)
3. تأكد من إضافة Python إلى PATH أثناء التثبيت

### المشكلة 2: tkinter غير متاح
**الأعراض**: "No module named 'tkinter'"

**الحل**:
- **Windows**: tkinter مدمج مع Python عادة
- **Linux**: 
  ```bash
  sudo apt-get install python3-tk
  ```
- **macOS**: 
  ```bash
  brew install python-tk
  ```

### المشكلة 3: ملفات النظام مفقودة
**الأعراض**: "No module named 'main_application'"

**الحل**:
1. تأكد من وجود هذه الملفات في نفس المجلد:
   - `main_application.py`
   - `database.py`
   - `models.py`
   - `utils.py`
   - `run_system.py`

### المشكلة 4: مشكلة في الصلاحيات
**الأعراض**: "Permission denied" أو "Access denied"

**الحل**:
1. شغل موجه الأوامر كمدير (Run as Administrator)
2. أو انقل المجلد إلى مكان آخر مثل Desktop
3. أو غير صلاحيات المجلد

### المشكلة 5: النافذة تفتح ولكن لا تظهر
**الأعراض**: العملية تعمل لكن لا ترى النافذة

**الحل**:
1. تحقق من شريط المهام (Taskbar)
2. اضغط Alt+Tab للتنقل بين النوافذ
3. جرب تشغيل `launch_gui.py` بدلاً من `run_system.py`

---

## 🛠️ خطوات الإصلاح المتقدمة

### الخطوة 1: تنظيف النظام
```bash
# احذف ملفات قاعدة البيانات القديمة (إذا وجدت)
del store_management.db
del test*.db

# احذف مجلدات مؤقتة (إذا وجدت)
rmdir /s logs
rmdir /s backups
```

### الخطوة 2: إعادة إنشاء البيئة
```bash
# أنشئ مجلد جديد
mkdir store_system_clean
cd store_system_clean

# انسخ ملفات النظام فقط
copy ..\*.py .
```

### الخطوة 3: تثبيت المتطلبات
```bash
pip install --upgrade pip
pip install matplotlib tkcalendar pillow
```

### الخطوة 4: اختبار تدريجي
```bash
# 1. اختبار Python
python --version

# 2. اختبار tkinter
python test_tkinter.py

# 3. اختبار الاستيرادات
python -c "from database import Database; print('OK')"

# 4. تشغيل النظام
python run_system.py
```

---

## 🎯 حلول حسب نظام التشغيل

### Windows:
```cmd
# تشغيل عادي
python run_system.py

# تشغيل مع عرض الأخطاء
python run_system.py 2>&1

# تشغيل كمدير
# انقر بالزر الأيمن على موجه الأوامر → Run as Administrator
```

### Linux/Mac:
```bash
# تشغيل عادي
python3 run_system.py

# تشغيل مع الصلاحيات
sudo python3 run_system.py

# تشغيل في الخلفية
nohup python3 run_system.py &
```

---

## 🆘 إذا لم تنجح جميع الحلول

### 1. استخدم الملفات البديلة:
- `launch_gui.py` - واجهة اختبار بسيطة
- `test_tkinter.py` - اختبار tkinter فقط
- `start_simple.py` - تشغيل مبسط

### 2. تحقق من السجلات:
- ابحث عن مجلد `logs` 
- افتح آخر ملف سجل لرؤية الأخطاء

### 3. تشغيل يدوي:
```python
# افتح Python مباشرة واكتب:
import tkinter as tk
from main_application import MainApplication
app = MainApplication()
app.run()
```

### 4. إعادة تحميل النظام:
- احذف جميع الملفات
- أعد تحميل النظام من جديد
- تأكد من سلامة الملفات

---

## 📞 معلومات إضافية للدعم

### معلومات النظام المطلوبة:
- نظام التشغيل: Windows/Linux/Mac
- إصدار Python: `python --version`
- رسالة الخطأ الكاملة
- الملفات الموجودة في المجلد

### ملفات مهمة للفحص:
- `run_system.py` - ملف التشغيل الرئيسي
- `main_application.py` - التطبيق الرئيسي
- `database.py` - قاعدة البيانات
- `logs/` - مجلد السجلات (إذا وجد)

### أوامر مفيدة للتشخيص:
```bash
# فحص Python
python --version
python -c "import sys; print(sys.path)"

# فحص tkinter
python -c "import tkinter; print('tkinter OK')"

# فحص الملفات
dir *.py
ls *.py

# فحص العمليات
tasklist | findstr python
ps aux | grep python
```

---

## ✅ التحقق من نجاح الإصلاح

عند نجاح الإصلاح ستشاهد:
1. **نافذة النظام الرئيسية** مع البطاقات الملونة
2. **شريط القوائم** في الأعلى
3. **شريط الحالة** في الأسفل مع الوقت
4. **8 بطاقات وظيفية** منها بطاقتان جديدتان للاستعلامات

إذا رأيت هذا، فالنظام يعمل بنجاح! 🎉

---

**ملاحظة**: إذا استمرت المشكلة، جرب تشغيل `launch_gui.py` كبديل مؤقت للوصول للنظام.
